@(poll: Poll, choices: List[Choice], results: PollResults)

@main("Answer") {
	<h1>@poll.title</h1>
	<blockquote>
		<p>@poll.description</p>
	</blockquote>
	
	@helper.form(action = routes.AnswerPoll.answer(poll.id)) {
		<table class="table table-bordered table-hover table-condensed poll-results">
			<thead>
			<tr>
				<th>Participants</th>
				@for(choice <- choices) {
					<th class="result">@choice.label</th>
				}
			</tr>
			</thead>
			<tbody>
				@for(username <- results.usernames) {
					<tr>
						<td>@username</td>
						@for(choice <- choices) {
							@if(results.isCheckedChoice(username, choice.id)) {
								<td class="result result-ok">&#10004;</td>
							} else {
								<td class="result result-ko"></td>
							}
						}
					</tr>
				}
				<tr>
					<th>Totals</th>
					@for(choice <- choices) {
						<td class="result @if(results.isBetterChoice(choice.id)) { better-choice }">@results.total(choice.id)</td>
					}
				</tr>
				<tr class="info">
					<td class="username"><input name="username" placeholder="Your name"/></td>
					@for(choice <- choices) {
						<td class="result answer">
							<input type="checkbox" name="choice_@choice.id" value="@choice.id" />
						</td>
					}
				</tr>
			</tbody>
		</table>
		<input class="btn btn-primary btn-large" value="Submit" type="submit" />
	}
	
	<script type="text/javascript">
        $('.answer').live('click', function(e) {
        	$(this).find("input:checkbox").each(function(){ this.checked = !this.checked; });
        	return false;
        })
        $(".answer :checkbox").click(function(e) {
   			e.stopPropagation();
   			var val = $(this).val();
  		});
        $('td.username').live('click', function(e) {
        	$(this).children("input").first().focus();
        })
    </script>
}
